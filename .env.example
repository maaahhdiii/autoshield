# AutoShield Environment Configuration
# Copy this file to .env and update with your values
# 
# For Proxmox LXC deployment: Copy this to /opt/autoshield/.env inside container
# For Docker Compose: Copy this to your project root

# ============================================
# Database Configuration
# ============================================
DB_PASSWORD=your_secure_postgres_password_here
POSTGRES_PASSWORD=your_secure_postgres_password_here

# ============================================
# Java Backend Configuration
# ============================================
ADMIN_USERNAME=admin
ADMIN_PASSWORD=admin123_change_in_production
JWT_SECRET=autoshield_jwt_secret_key_change_in_production_minimum_256_bits_required_for_hs256

# ============================================
# Proxmox API Configuration
# ============================================
# Your Proxmox host IP (where Proxmox VE is running)
PROXMOX_API_URL=https://192.168.1.100:8006

# Create token in Proxmox: Datacenter → Permissions → API Tokens
# Format: username@realm!tokenname
PROXMOX_TOKEN_ID=autoshield@pam!monitoring
PROXMOX_TOKEN_SECRET=your-proxmox-api-token-secret

# ============================================
# MCP Server Configuration
# ============================================
# Internal Docker network (default for single LXC deployment)
MCP_SERVER_URL=http://kali-mcp:8001/sse

# If Kali server is on separate machine/VM:
# MCP_SERVER_URL=http://192.168.1.153:8001/sse

# MCP Authentication Token (CHANGE THIS!)
# Generate: openssl rand -hex 16
MCP_AUTH_TOKEN=your_mcp_authentication_token_change_in_production

# ============================================
# Security Configuration
# ============================================
# IP ranges allowed to be scanned (CIDR format)
# Adjust for your home network
ALLOWED_IP_RANGES=192.168.0.0/16,10.0.0.0/8

# Whitelisted IPs (never blocked, comma-separated)
# Include: localhost, LXC IP, Proxmox host, your workstation
WHITELISTED_IPS=127.0.0.1,::1,192.168.1.1,192.168.1.100,192.168.1.150

# Threat score threshold (0-100, higher = more aggressive blocking)
THREAT_SCORE_THRESHOLD=70

# Enable automatic IP blocking (set false for monitoring only)
ENABLE_AUTO_BLOCK=true

# Dry run mode (log actions without executing)
DRY_RUN_MODE=false

# ============================================
# Backend Service URLs (Internal Docker network)
# ============================================
# Java Backend URL (for Python AI to send webhooks)
JAVA_BACKEND_URL=http://java-backend:8080

# If Java backend on separate machine:
# JAVA_BACKEND_URL=http://192.168.1.154:8080

# ============================================
# Logging Configuration
# ============================================
LOG_LEVEL=INFO

# ============================================
# Optional: Email Notifications
# ============================================
# SMTP_HOST=smtp.gmail.com
# SMTP_PORT=587
# SMTP_USERNAME=your-email@gmail.com
# SMTP_PASSWORD=your-app-password
# ALERT_EMAIL_TO=admin@example.com

# ============================================
# Optional: Cooldown Timers (seconds)
# ============================================
# SCAN_COOLDOWN_SECONDS=300      # 5 minutes between scans per IP
# BLOCK_COOLDOWN_SECONDS=3600    # 1 hour between blocks per IP

# ============================================
# Optional: Threat Score Multipliers
# ============================================
# FAILED_LOGIN_THRESHOLD=5       # Failed logins before action
# BRUTE_FORCE_WINDOW=3600        # Time window for pattern detection (1 hour)

# ============================================
# Network Configuration
# ============================================
# Python AI Host/Port
HOST=0.0.0.0
PORT=8000

# Kali MCP Host/Port  
# HOST=0.0.0.0
# PORT=8001

# ============================================
# SSH Configuration (for AI defensive actions)
# ============================================
# SSH connection for executing defensive commands
# Localhost for LXC container (AI controls its own host)
SSH_HOST=localhost
SSH_PORT=22
SSH_USERNAME=root

# Authentication: Use either password or key file
SSH_PASSWORD=your_root_password_here
# OR use SSH key (preferred for security)
SSH_KEY_FILE=/root/.ssh/id_rsa

# SSH timeout (seconds)
SSH_TIMEOUT=10
